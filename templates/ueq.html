<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <link rel="icon" type="image/png" sizes="32x32" href="../img/clipboard2-heart-fill.svg">
    <link rel="stylesheet" href="../css/ueqstyle.css">
    <title>Cuestionario UEQ | Crear UEQ </title>
</head>

<body>

    <div class="cabecera">
        <h1>Crear cuestionario UEQ</h1>
        
        <div class="btn">
            <button id ="Genbtn" class="enviar" type="submit">Generar cuestionario</button>
        </div>
    </a>

    </div>

    <div class="cuestionario">
        <div class="titulo">
            <label>Título</label>
            <input id = "Titulo" name="titulo" type="text" class="input-box" placeholder="Añade un título al proyecto" required>
        </div>

        <div class="descrip">
            <label>Descripción</label>
            <textarea id = "Descrip" name="text" class="input-box"
                placeholder="Aquí puedes incluir información del sistema a testear, instrucciones o detalles"></textarea>
        </div>
        
        <script src="../js/ueqjs.js"></script>

        <h3><b>Vista previa</b> de los ítems del cuestionario que se generará</h3>

        <table class = "listitem">
            <tbody>
                <tr> 
                    <% for(var i=0; i < items.length; i++) { %>
                    <td><%= (i+1)%></td>
                    <td><%=items[i].item1%></td>
                    <td> <div class="puntuacion">
                        <input class="punto" type="radio" name="a" />
                        <input class="punto" type="radio" name="a" />
                        <input class="punto" type="radio" name="a" />
                        <input class="punto" type="radio" name="a" />
                        <input class="punto" type="radio" name="a" />
                        <input class="punto" type="radio" name="a" />
                        <input class="punto" type="radio" name="a" />
                    </div> </td>
                  
                    <td><%=items[i].item2%></td>
                  </tr>
                  <% } %>
            </tbody>
        </table>
                </div>
            </div>

        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.8.1/firebase-analytics.js";
        
        const firebaseConfig = {
          apiKey: "AIzaSyC2Nf2saIKF-EZLoUmRbIk7AsFah1sD5n0",
          authDomain: "ueqdatabase.firebaseapp.com",
          projectId: "ueqdatabase",
          storageBucket: "ueqdatabase.appspot.com",
          messagingSenderId: "644974973593",
          appId: "1:644974973593:web:fe016a5432e0b1d9de1e08",
          measurementId: "G-85VR5Z8V64"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        import {getDatabase, ref, set, child, update, remove}
        from "https://www.gstatic.com/firebasejs/9.8.1/firebase-app.js";

        const db = getDatabase();
        var titulo = document.getElementById("Titulo");
        var descrip = document.getElementById("Descrip");
        var genbtn = document.getElementById("Genbtn");

        function insertarData(){
            set(ref(db, "Cuestionarios/" + rollbox.value), {
                Titulo: titulo.value,
                Descrip: descrip.value
            })
            .then(() => {
                alert("Cuestionario creado con éxito");
            })
            .catch((error)=> {
                alert("Ha habido un problema en " + error);
            });
        }

        genbtn.addEventListener('click', insertarData);
        
        </script>

</body>




</html>